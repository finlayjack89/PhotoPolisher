I need to implement a "Studio-Grade" reflection engine to fix the visual gap bug and improve photorealism across the app. 

Please execute this 3-part architectural update:

### Part 1: Upgrade Reflection Generator (`src/lib/reflection-utils.ts`)
Replace the existing reflection generation logic with this advanced version that supports surface diffusion (blur) and Fresnel falloff (gradient masking).

**Implementation:**
Export this updated function. Note the use of `ctx.filter` for blur and `destination-in` for the fade mask.

```typescript
export async function generateSmartReflection(
  img: HTMLImageElement,
  width: number,
  height: number,
  blur: number = 4, 
  opacity: number = 0.25 
): Promise<HTMLCanvasElement> {
  const canvas = document.createElement('canvas');
  canvas.width = width;
  canvas.height = height;
  const ctx = canvas.getContext('2d');

  if (!ctx) throw new Error('Could not get context');

  // 1. Vertical Flip & Surface Diffusion
  ctx.save();
  ctx.translate(0, height);
  ctx.scale(1, -1);
  ctx.filter = `blur(${blur}px)`; // Simulates glossy floor diffusion
  ctx.drawImage(img, 0, 0, width, height);
  ctx.restore();

  // 2. Gradient Mask (Distance Falloff)
  ctx.globalCompositeOperation = 'destination-in';
  const gradient = ctx.createLinearGradient(0, 0, 0, height);
  gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');     // Full visibility at touch point
  gradient.addColorStop(0.4, 'rgba(255, 255, 255, 0.6)'); // Mid-fade
  gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');     // Invisible at bottom
  
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, width, height);

  ctx.globalCompositeOperation = 'source-over'; 

  return canvas;
}
Part 2: Fix "Floating Gap" in Compositor (src/lib/canvas-utils.ts)
In the compositeLayers function, update the section where the reflection is drawn.

Critical Requirements:

Negative Offset: Calculate reflectionY as subjectY + subjectHeight - 2. The -2px overlap closes the anti-aliasing gap.

Layer Order: Draw the reflection BEFORE the subject. The subject must sit on top of the reflection to hide the overlap seam.

Code Pattern:

TypeScript

// ... inside compositeLayers ...

// 1. Draw Reflection FIRST
if (showReflection) {
   // Use cleanSubject (no shadow) for the source
   const reflectionCanvas = await generateSmartReflection(
     cleanSubjectImg, 
     subjectWidth, 
     subjectHeight * 0.6, // Only need top 60%
     4, // Blur
     0.25 // Opacity
   );

   ctx.save();
   ctx.globalAlpha = 0.25; // Master opacity
   
   // GAP FIX: Overlap by 2 pixels
   const GAP_OVERLAP = 2;
   const reflectionY = subjectY + subjectHeight - GAP_OVERLAP;

   ctx.drawImage(
     reflectionCanvas,
     subjectX,
     reflectionY,
     subjectWidth,
     subjectHeight * 0.6
   );
   ctx.restore();
}

// 2. Draw Subject ON TOP (covers the overlap edge)
ctx.drawImage(subjectImg, subjectX, subjectY, subjectWidth, subjectHeight);
Part 3: Update Default Parameters (src/components/CommercialEditingWorkflow.tsx)
Locate where generateSmartReflection is called or where default state is initialized. Update the parameters to these "Gold Standard" values for realism:

Blur: 4px (softens digital edges)

Opacity: 0.25 (subtle, expensive look)

Height Ratio: 0.6 (reflection fades before bottom of canvas)

Verification: The final output should show the bag "sitting" firmly on the floor with no white gap, and the reflection should fade out smoothly like a real studio glossy surface.